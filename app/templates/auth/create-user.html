{% extends "_base_page.html" %}

{% block pageTitle %}
  Create account â€“ Digital Marketplace
{% endblock %}

{% block mainContent %}
  {% set headings = {
      'buyer': 'Create a new Digital Marketplace account',
      'supplier': "Add your name and create a password"
    }
  %}

  <span class="govuk-caption-l">{{ email_address }}</span>
  <h1 class="govuk-heading-l">{{ headings[role] }}</h1>

  <form autocomplete="off" action="{{ url_for('.submit_create_user', encoded_token=token) }}" method="POST" id="createUserForm">
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">
        {{ form.hidden_tag() }}

        {{ govukInput({
          "label": {
            "text": form.name.label.text,
          },
          "errorMessage": errors.get('name', {}).get('errorMessage'),
          "id": "input-name",
          "name": "name",
          "value": form.name.data,
          "attributes": {
            "autocomplete": "off",
          },
        }) }}


        {% if role == 'buyer' %}
          {{ govukInput({
            "label": {
              "text": form.phone_number.label.text,
            },
            "hint": {
              "text": form.phone_number.hint,
            },
            "errorMessage": errors.get('phone_number', {}).get('errorMessage'),
            "id": "input-phone_number",
            "name": "phone_number",
            "value": form.phone_number.data,
            "attributes": {
              "autocomplete": "off",
            },
          }) }}
        {% endif %}

        {{ govukInput({
          "label": {
            "text": form.password.label.text,
          },
          "errorMessage": errors.get('password', {}).get('errorMessage'),
          "id": "input-password",
          "type": "password",
          "name": "password",
          "value": form.password.data,
          "attributes": {
            "autocomplete": "off",
          },
        }) }}

        {{ govukButton({
          "text": "Create account"
        }) }}
      </div>
    </div>
  </form>
{% endblock %}
